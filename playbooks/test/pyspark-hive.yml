---

- name: Start PySpark Hive
  hosts: "{{ groups['spark'][0] }}"
  remote_user: "{{ remote_user }}"
  become: no
  tasks:
    - name: Create Sample directory
      file:
        path: "/home/{{ remote_user }}/tmp/spark-hive"
        state: directory
    - name: Copy Python source
      template:
        src: "spark/pyspark-hive.py"
        dest: "/home/{{ remote_user }}/tmp/spark-hive/"
    - name: test export
      shell: "export"
      register: test_var
    - name: debugging..
      debug:
        var: test_var
#    - name: Start Job
#      shell: "{{ bigdata_home }}/spark/bin/spark-submit /home/{{ remote_user }}/tmp/spark-hive/pyspark-hive.py"