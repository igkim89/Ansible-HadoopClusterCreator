---

- name: Start ZooKeeper command test
  hosts: "{{ groups['zookeeper'][0] }}"
  remote_user: "{{ remote_user }}"
  become: no
  vars:
    zookeeper_home: "{{ bigdata_home }}/zookeeper"
  tasks:
    - name: Start Test
      command: "{{ zookeeper_home }}/bin/zkCli.sh -server {% for zoo in groups['zookeeper'] %}{% if zoo != groups['zookeeper'][0] %},{% endif %}{{ zoo }}:{{ zookeeper.client_port }}{% endfor %} ls /"
      register: test_result
    - name: Show result
      debug:
        var: test_result